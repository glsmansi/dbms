<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Details</title>
        <link href="https://fonts.googleapis.com/css?family=Comfortaa|Cormorant+Garamond|Poiret+One" rel="stylesheet">

        <link href="https://fonts.googleapis.com/css?family=Bad+Script" rel="stylesheet">

        <link href="https://fonts.googleapis.com/css?family=Chewy|Kaushan+Script|Permanent+Marker|Rock+Salt"
            rel="stylesheet">
        <!-- <link rel="stylesheet" href="public/css/table.css"> -->
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
            }

            h2 {
                margin-bottom: 50px;
                margin-top: 50px;
            }

            .light-table-filter {
                margin-top: 50px;
            }

            .in-bg {
                position: absolute;
                background: #282931;
                height: 90px;
                width: 100%;
                z-index: -9;
                box-shadow: 2px 2px 10px 2px rgba(0, 0, 0, 0.15);
            }

            input[type=text],
            textarea {
                box-shadow: 0 2px 15px 0 rgba(0, 0, 0, .3);
                color: black;
                padding: 10px;
                width: 450px;
                height: 33px;
                border-radius: 100px;
                -webkit-transition: all 0.30s ease-in-out;
                -moz-transition: all 0.30s ease-in-out;
                -ms-transition: all 0.30s ease-in-out;
                -o-transition: all 0.30s ease-in-out;
                outline: none;
                margin: 60px 1px 3px 0px;
                border: 1px solid rgba(34, 36, 38, .15);
                font-family: 'Comfortaa', cursive;
            }

            img {
                width: 200px;
                height: 300px;
            }

            table td:hover {
                background: cyan;
                color: #fff;
            }

            table td {
                border-radius: 8px;
            }

            table th:hover {
                color: #fff;
                background: cyan;
                border-radius: 100px;
            }

            input[type=text]:focus,
            textarea:focus {
                -webkit-transition: all 0.30s ease-in-out;
                -moz-transition: all 0.30s ease-in-out;
                -ms-transition: all 0.30s ease-in-out;
                -o-transition: all 0.30s ease-in-out;
                margin: 20px 1px 3px 0px;
                border: 1px solid white;
                font-family: 'Comfortaa', cursive;
            }

            ::-webkit-input-placeholder {
                /* Chrome/Opera/Safari */
                color: black;
                font-size: 13px;
            }

            ::-moz-placeholder {
                /* Firefox 19+ */
                color: black;
                font-size: 13px;
            }

            :-ms-input-placeholder {
                /* IE 10+ */
                color: black;
                font-size: 13px;
            }

            :-moz-placeholder {
                /* Firefox 18- */
                color: black;
                font-size: 13px;
            }

            #abc {
                position: relative;
                bottom: 0.5px;
                left: 1500px;
                color: red;
                font-size: 25px;
            }

            #con-width {
                max-width: 1200px;
            }

            .container {
                text-align: center;
                overflow: hidden;
                width: 100%;
                margin: 0 auto;
                font-family: 'Comfortaa', cursive;
                color: black;
            }

            .container table {
                margin-top: 40px;
                width: 100%;
            }

            .container td,
            .container th {
                padding: 10px;
            }

            .container td:first-child,
            .container th:first-child {
                padding-left: 20px;
            }

            .container td:last-child,
            .container th:last-child {
                padding-right: 20px;
            }

            .container th {
                border-bottom: 1px solid #ddd;
                position: relative;
            }


            /*  FOLLOW*/

            .Follow {
                background: url("https://pbs.twimg.com/profile_images/959092900708544512/v4Db9QRv_bigger.jpg")no-repeat center / contain;
                width: 50px;
                height: 50px;
                bottom: 9px;
                right: 20px;
                display: block;
                position: fixed;
                border-radius: 50%;
                z-index: 999;
                animation: rotation 10s infinite linear;
            }

            #search {
                font-size: 25px;
                /* padding: 30%px; */
                text-align: center;
            }

            @-webkit-keyframes rotation {
                from {
                    -webkit-transform: rotate(0deg);
                }

                to {
                    -webkit-transform: rotate(359deg);
                }
            }
        </style>

    </head>

    <body>
        <!-- partial:index.partial.html -->
        <html>

            <head>
                <title>Javascript Table Filter</title>
            </head>

            <body>
                <form action="/" method="get">
                    <button type="submit" class="btn btn-outline-danger" id="abc">Logout</button>

                </form>

                <div id="fixed-header">
                    <div class="in-bg"></div>
                    <section class="container" id="con-width">

                        <input class="light-table-filter" onkeyup="searchTable() " placeholder="Search..." type="text"
                            id="myInput">



                        <table id="myTable" class="order-table">
                            <thead>
                                <tr>
                                    <th>Pid</th>
                                    <th>Transaction Id</th>
                                    <th>Department</th>
                                    <th>Event_Name</th>
                                    <th>Student_Name</th>
                                    <th>Email_ID</th>
                                    <th>College</th>
                                    <th>Payment</th>

                                </tr>
                            </thead>
                            <tbody>

                                <%
                                var count=0
                                    if(userData.length!=0){
                                       
                                    for(let i=0;i<userData.length;i++){                                
                                    count+=1
                                %>
                                <tr class="details">

                                    <td><%=i+1; %></td>
                                    <td><%=userData[i].TRANSACTION_ID%></td>
                                    <td><%=userData[i].BRANCH%></td>
                                    <td><%=userData[i].EVENT_NAME %> </td>
                                    <td><%=userData[i].NAME %></td>
                                    <td><%=userData[i].EMAIL %></td>
                                    <td><%=userData[i].COLLEGE_NAME %></td>
                                    <td><%=userData[i].PAYMENT_CONFIRMATION%></td>








                                </tr>

                                <%   } %>



                                <tr>


                                    <td colspan="3"><a href="/admin/table/ticket">E-ticket</a></td>
                                    <td colspan="2"><a href="/admin/table/notifications">Notifications</a></td>
                                    <td colspan="4"><a href="/admin/table/event_details">Event_details</a></td>

                                    <% } else{ %>

                                    <td colspan="8">No Data Found</td>

                                    <td colspan="4"><a href="/admin/table/notifications">Notifications</a></td>
                                    <td colspan="1"><a href="/admin/table/event_details">Event_details</a></td>




                                </tr>
                                <% } %>

                            </tbody>


                        </table>

                    </section>

                </div>

                <p id="search">count:<span id="searchcount"><%=count%></span></p>


            </body>

        </html>


        <script>
            var s1 = document.querySelector("#searchcount").innerHTML.toString()
            console.log(s)
        </script>


        <script>
            function searchTable() {
                console.log(s1)
                var s = document.querySelector("#myInput")
                // document.querySelector("#searchcount").textContent
                console.log(s.value)
                if (s.value.trim().length > 0) {
                    var input, filter, found, table, tr, td, i, j, count = 0;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase();
                    table = document.getElementById("myTable");
                    tr = table.getElementsByTagName("tr");
                    for (i = 1; i <= tr.length; i++) {
                        td = tr[i].getElementsByTagName("td");
                        for (j = 0; j < td.length; j++) {
                            if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
                                found = true;
                                count += 1
                            }


                        }
                        document.querySelector("#searchcount").innerHTML = count
                        if (found) {
                            tr[i].style.display = "";
                            found = false;
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                } else {
                    var input, filter, found, table, tr, td, i, j;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase();
                    table = document.getElementById("myTable");
                    tr = table.getElementsByTagName("tr");
                    for (i = 1; i <= tr.length; i++) {
                        td = tr[i].getElementsByTagName("td");
                        for (j = 0; j < td.length; j++) {
                            if (td[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
                                found = true;

                            }


                        }
                        document.querySelector("#searchcount").innerHTML = s1
                        if (found) {
                            tr[i].style.display = "";
                            found = false;
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
            }

        </script>




    </body>

</html>